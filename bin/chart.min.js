var chart=chart||{};!function(c){c.enumChart=Object.freeze({column:1,geo:2})}(window.chart),function(c){c.charts=c.charts||{},c.charts.ChartBase=function(pOptions,el){function init(){validate(),window.google.setOnLoadCallback(drawChart)}function drawChart(data,options){data&&data.length>0&&(settings.data=data),options&&$.extend(!0,settings.options,options);var dataTable=getDataTable(settings.data);if(dataTableChart=window.google.visualization.arrayToDataTable(dataTable),settings.responsive){var resul=65*dataTableChart.getNumberOfColumns();resul>settings.options.width&&(settings.options.width=resul)}chart=self._draw(el,dataTableChart,settings.options),window.google.visualization.events.addListener(chart,"select",select)}function getDataTable(data){var dataTable=[],columns=getColumns(data),rows=getRows(columns,data);dataTable.push(columns);for(var countRows=rows.length,i=0;countRows>i;i++)dataTable.push(rows[i]);return dataTable}function getColumns(data){for(var found,count=data.length,columns=["Grupo"],groups=[],i=0;count>i;i++)found=groups.filter(function(item){return item===data[i].Descricao}),0===found.length&&groups.push(settings.data[i].Descricao);return columns.push.apply(columns,groups),columns}function getRows(columns,data){for(var found,count=data.length,rows=[],groups=[],i=0;count>i;i++)found=groups.filter(function(item){return item===settings.data[i].Grupo}),0===found.length&&groups.push(settings.data[i].Grupo);count=groups.length;for(var y=0;count>y;y++){var row=[];row.push(groups[y]);for(var countColumns=columns.length,j=1;countColumns>j;j++)row.push(getValues(groups[y],columns[j],data));rows.push(row)}return rows}function getValues(row,column,data){var found=data.filter(function(item){return item.Grupo===row&&item.Descricao===column});if(0===found.length)return{v:0,f:window.chart.moneyFormat("0",settings.moneyFormat)};var value=found.reduce(function(ant,current){return{Valor:ant.Valor+current.Valor}}).Valor;return{v:value,f:window.chart.moneyFormat(value.toFixed(2),settings.moneyFormat)}}function validate(){if(!settings.source&&!settings.data)throw new Error("Data source not found.")}function select(){var dataChart={};dataChart.text=dataTableChart.getValue(chart.getSelection()[0].row,0),chart.setSelection(),settings.select(dataChart)}var chart,dataTableChart,self=this,options=pOptions,settings={source:"",data:null,responsive:!1,options:{},select:function(pchart){},mouseOver:function(pchart){},moneyFormat:null};$.extend(!0,settings,options),self.drawChart=drawChart,init()}}(window.chart),function(c){"use strict";c.charts=c.charts||{},c.charts.Column=function(options,element){var self=this,settings={legend:{position:"none"},height:100,width:100,backgroundColor:"transparent",bar:{groupWidth:"95%"}};self._draw=function(pElement,datatable,pOptions){$.extend(!0,settings,pOptions);var chart=new window.google.visualization.ColumnChart(pElement);return chart.draw(datatable,settings),chart},c.charts.ChartBase.call(self,options,element)},c.charts.Column.prototype=Object.create(c.charts.ChartBase.prototype)}(window.chart),function(c){"use strict";c.charts=c.charts||{},c.charts.Geo=function(options,element){var self=this,settings={height:100,width:100,region:"BR",displayMode:"provinces"};self._draw=function(pElement,datatable,pOptions){$.extend(!0,settings,pOptions);var chart=new google.visualization.GeoChart(pElement);return chart.draw(datatable,settings),chart},c.charts.ChartBase.call(self,options,element)},c.charts.Geo.prototype=Object.create(c.charts.ChartBase.prototype)}(window.chart),function(c){c.factory=c.factory||{},c.factory.chartFactory=function(){function createNew(typeChart,options,el){return new Charts[typeChart](options,el)}var Charts={};return Charts[c.enumChart.geo]=c.charts.Geo,Charts[c.enumChart.column]=c.charts.Column,{createNew:createNew}}}(window.chart),function($){"use strict";window.google.load("visualization","1",{packages:["corechart","geochart"]}),$.fn.chart=function(typeChart,settings){return window.chart.factory.chartFactory().createNew(typeChart,settings,this[0])}}(window.jQuery);